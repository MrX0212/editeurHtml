<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <title>PrÃ©visualisation - GitHub Pages</title>
</head>
<body>
  <button onclick="goBack()">â¬… Retour Ã  l'Ã©diteur</button>
  <button onclick="copyLink()">ðŸ“‹ Copier le lien</button>

  <iframe id="preview" style="width:100%; height:80vh;"></iframe>

  <script>
    function getParameterByName(name) {
      const url = new URL(window.location.href);
      return url.searchParams.get(name);
    }

    function goBack() {
      window.location.href = 'index.html';
    }

    function loadPreview() {
      const codeId = getParameterByName('codeId');
      if (!codeId) {
        alert('Pas de code Ã  afficher');
        return;
      }
      const code = localStorage.getItem('previewCode_' + codeId);
      if (!code) {
        alert('Code non trouvÃ© dans localStorage');
        return;
      }
      const fullHtml = `<!DOCTYPE html><html><head><meta charset="UTF-8"></head><body>${code}</body></html>`;
      document.getElementById('preview').srcdoc = fullHtml;
    }

    function copyLink() {
      navigator.clipboard.writeText(window.location.href)
        .then(() => alert('Lien copiÃ© !'))
        .catch(() => alert('Impossible de copier le lien automatiquement.'));
    }

    window.onload = loadPreview;
  </script>
</body>
</html>
